(()=>{var e={143:()=>{}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(143),t=r.n(e);class i{constructor(){this.audioHandler=new AudioHandler,this.translationService=new(t()),this.uiController=new UIController,this.initialize(),this.setupEventListeners()}async initialize(){try{if(!await this.audioHandler.initialize())throw new Error("Failed to initialize audio");if("serviceWorker"in navigator)try{await navigator.serviceWorker.register("./sw.js"),console.log("Service Worker registered")}catch(e){console.error("Service Worker registration failed:",e)}}catch(e){console.error("Initialization error:",e),alert("Error initializing app. Please check console for details.")}}setupEventListeners(){this.uiController.micButton.addEventListener("click",(()=>{if(this.audioHandler.isRecording)this.audioHandler.stopRecording();else{const e=this.uiController.languageSelect.value;this.audioHandler.startRecording(e)}})),this.uiController.clearButton.addEventListener("click",(()=>{this.translationService.clearTranslations(),this.uiController.clearTranslations()})),this.uiController.exportButton.addEventListener("click",(()=>{this.translationService.exportTranslations()})),window.addEventListener("speechResult",(async e=>{const{transcript:t,isFinal:r}=e.detail;if(this.uiController.updateCurrentText(t),r)try{const e=this.uiController.languageSelect.value.split("-")[0],r=await this.translationService.translateText(t,e,"en");this.uiController.addTranslation({original:t,translated:r,timestamp:new Date})}catch(e){console.error("Translation error:",e),alert("Error during translation. Please try again.")}})),window.addEventListener("recordingStateChange",(e=>{const{isRecording:t}=e.detail;this.uiController.updateRecordingState(t)})),window.addEventListener("transcriptionModeChange",(e=>{const{mode:t,selectedLanguage:r}=e.detail;this.audioHandler.setTranscriptionMode(t,r)}))}}document.addEventListener("DOMContentLoaded",(()=>{new i}))})()})();